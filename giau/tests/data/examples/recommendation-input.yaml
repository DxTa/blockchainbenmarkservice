tosca_definitions_version: cloudify_dsl_1_3
imports:
- 'http://www.getcloudify.org/spec/cloudify/4.5.5/types.yaml'
node_types:
  giau.nodes.generalnode:
    derived_from: cloudify.nodes.Container
    properties:
      os:
        default: linux
        description: ''
        required: true
        type: string
      storageHDD:
        default: 10
        description: Standard HDD storage available for the container in GB.
        required: true
        type: string
      storageSSD:
        default: 10
        description: SSD storage available for the container in GB.
        required: true
        type: string
      memory:
        default: 4
        description: RAM in GB
        required: true
        type: string
      infrastructure:
        default: ''
        description: >-
          Metadata about the infrastructure, e.g. cloud provider, execution
          environment
        required: true
      name:
        default: container
        description: container name
        required: true
        type: string
      vCPUcount:
        default: 1
        description: 'vCPU count, one core is Intel Xeon E5 Sandy Bridge'
        required: true
        type: string
    interfaces: {}
  giau.nodes.SoftwareArtefact:
    derived_from: cloudify.nodes.ApplicationModule
    properties:
      repositoryTag:
        default: ''
        description: Identification of the artefact in an external provider (dockerhub...)
        required: true
        type: string
      executionEnvironment:
        default: ''
        description: Execution environment for the artefact
        required: true
        type: string
      name:
        default: ''
        description: ''
        required: true
        type: string
    interfaces: {}
  giau.nodes.EdgeProcessingApplication:
    derived_from: giau.nodes.SoftwareArtefact
    properties: {}
    interfaces: {}
  giau.nodes.BlockchainArtefact:
    derived_from: giau.nodes.SoftwareArtefact
    properties:
      implementation:
        default: ethereum
        description: Name of the used blockchain implementation
        required: true
        type: string
      featureName:
        default: miner
        description: Name of the blockchain feature executed in the artefact.
        required: true
        type: string
    interfaces: {}
  giau.nodes.rsu:
    derived_from: giau.nodes.generalnode
    properties: {}
    interfaces: {}
  giau.nodes.edge:
    derived_from: giau.nodes.generalnode
    properties: {}
    interfaces: {}
  giau.nodes.cloud:
    derived_from: giau.nodes.generalnode
    properties: {}
    interfaces: {}
  giau.nodes.vehicle:
    derived_from: giau.nodes.generalnode
    properties: {}
    interfaces: {}
relationships:
  giau.relationships.nodes_network:
    derived_from: cloudify.relationships.connected_to
    properties:
      bandwidth:
        default: 1Mbps
        description: Network bandwidth
        required: true
        type: string
      latency:
        default: 100
        description: Network Latency in ms.
        required: true
        type: integer
      name:
        default: 4G
        description: Name of the underlying network connection
        required: true
        type: string
    source_interfaces: {}
    target_interfaces: {}
node_templates:
  edge_dev1:
    type: giau.nodes.rsu
    relationships:
      - target: iot1
        type: giau.relationships.nodes_network
  edge_node:
    type: giau.nodes.edge
    relationships:
      - target: edge_dev2
        type: giau.relationships.nodes_network
      - target: edge_dev1
        type: giau.relationships.nodes_network
      - target: iot3
        type: giau.relationships.nodes_network
  edge_dev2:
    type: giau.nodes.rsu
    relationships:
      - target: iot2
        type: giau.relationships.nodes_network
  iot1:
    type: giau.nodes.vehicle
  iot2:
    type: giau.nodes.vehicle
  iot3:
    type: giau.nodes.vehicle